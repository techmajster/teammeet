(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[317],{5275:function(e,s,r){Promise.resolve().then(r.bind(r,7148)),Promise.resolve().then(r.bind(r,7267)),Promise.resolve().then(r.bind(r,5131)),Promise.resolve().then(r.bind(r,9430)),Promise.resolve().then(r.bind(r,7684)),Promise.resolve().then(r.bind(r,9545)),Promise.resolve().then(r.t.bind(r,6340,23))},7267:function(e,s,r){"use strict";r.d(s,{default:function(){return c}});var a=r(7573),t=r(7653),n=r(6273),i=r(7354),l=r(1856),o=r(7787);function c(e){let{roomSlug:s}=e,[r,c]=(0,t.useState)(!1),d=async()=>{try{let e="".concat(window.location.origin,"/rooms/").concat(s);await navigator.clipboard.writeText(e),c(!0),o.A.success("Room URL copied to clipboard!"),setTimeout(()=>{c(!1)},2e3)}catch(e){console.error("Failed to copy URL:",e),o.A.error("Failed to copy URL. Please try again.")}};return(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:d,children:r?(0,a.jsx)(i.Z,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(l.Z,{className:"h-4 w-4"})})}},5131:function(e,s,r){"use strict";r.d(s,{default:function(){return h}});var a=r(7573),t=r(7653),n=r(1695),i=r(6273),l=r(2295),o=r(3769),c=r(9696),d=r(997),m=r(5721),u=r(1691),x=r(7787);function h(e){let{room:s}=e,[r,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(""),[j,g]=(0,t.useState)(!1),v=(0,n.useRouter)(),y="delete ".concat(s.name),N=p.toLowerCase()===y.toLowerCase(),w=async()=>{if(!N){x.A.error("Please type the confirmation text correctly");return}g(!0);try{let{error:e}=await u.G.deleteRoom(s.id);if(e){console.error("Error deleting room:",e),x.A.error("Failed to delete room. Please try again.");return}x.A.success('Room "'.concat(s.name,'" has been permanently deleted')),h(!1),v.push("/dashboard")}catch(e){console.error("Error deleting room:",e),x.A.error("Failed to delete room. Please try again.")}finally{g(!1)}};return(0,a.jsxs)(l.aR,{open:r,onOpenChange:e=>{j||(h(e),e||f(""))},children:[(0,a.jsx)(l.vW,{asChild:!0,children:(0,a.jsxs)(i.z,{variant:"destructive",size:"sm",children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Delete Room"]})}),(0,a.jsxs)(l._T,{children:[(0,a.jsxs)(l.fY,{children:[(0,a.jsx)(l.f$,{children:"Delete Room"}),(0,a.jsxs)(l.yT,{className:"space-y-3",children:[(0,a.jsxs)("p",{children:["Are you sure you want to permanently delete ",(0,a.jsxs)("strong",{children:['"',s.name,'"']}),"?"]}),(0,a.jsx)("p",{children:"This action will:"}),(0,a.jsxs)("ul",{className:"list-disc pl-6 space-y-1",children:[(0,a.jsx)("li",{children:"Remove all participants from the room"}),(0,a.jsx)("li",{children:"Delete all room data and history"}),(0,a.jsxs)("li",{children:["Invalidate the room URL (",s.slug,")"]}),(0,a.jsx)("li",{children:"Cannot be undone"})]}),(0,a.jsxs)("p",{className:"text-sm",children:["To confirm, type ",(0,a.jsxs)("strong",{children:["delete ",s.name]})," below:"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"confirmation-input",children:"Confirmation"}),(0,a.jsx)(o.I,{id:"confirmation-input",placeholder:"delete ".concat(s.name),value:p,onChange:e=>f(e.target.value),disabled:j,className:!N&&p?"border-red-500":""}),!N&&p&&(0,a.jsxs)("p",{className:"text-sm text-red-500",children:['Please type "delete ',s.name,'" exactly as shown']})]}),(0,a.jsxs)(l.xo,{children:[(0,a.jsx)(l.le,{disabled:j,children:"Cancel"}),(0,a.jsx)(l.OL,{onClick:w,disabled:!N||j,className:"bg-red-600 hover:bg-red-700",children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting Room..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Delete Room Forever"]})})]})]})]})}},9430:function(e,s,r){"use strict";r.d(s,{default:function(){return z}});var a=r(7573),t=r(7653),n=r(6273),i=r(8521),l=r(9696),o=r(6225),c=r(3912),d=r(9369),m=r(5688);let u=c.fC;c.ZA;let x=c.B4,h=t.forwardRef((e,s)=>{let{className:r,children:t,...n}=e;return(0,a.jsxs)(c.xz,{ref:s,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...n,children:[t,(0,a.jsx)(c.JO,{asChild:!0,children:(0,a.jsx)(m.v4q,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=c.xz.displayName;let p=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(c.u_,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...t,children:(0,a.jsx)(m.g8U,{className:"h-4 w-4"})})});p.displayName=c.u_.displayName;let f=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(c.$G,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...t,children:(0,a.jsx)(m.v4q,{className:"h-4 w-4"})})});f.displayName=c.$G.displayName;let j=t.forwardRef((e,s)=>{let{className:r,children:t,position:n="popper",...i}=e;return(0,a.jsx)(c.h_,{children:(0,a.jsxs)(c.VY,{ref:s,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...i,children:[(0,a.jsx)(p,{}),(0,a.jsx)(c.l_,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,a.jsx)(f,{})]})})});j.displayName=c.VY.displayName,t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(c.__,{ref:s,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",r),...t})}).displayName=c.__.displayName;let g=t.forwardRef((e,s)=>{let{className:r,children:t,...n}=e;return(0,a.jsxs)(c.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(c.wU,{children:(0,a.jsx)(m.nQG,{className:"h-4 w-4"})})}),(0,a.jsx)(c.eT,{children:t})]})});g.displayName=c.ck.displayName,t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(c.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...t})}).displayName=c.Z0.displayName;var v=r(4132);let y=v.fC,N=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(v.aV,{ref:s,className:(0,d.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",r),...t})});N.displayName=v.aV.displayName;let w=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(v.xz,{ref:s,className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",r),...t})});w.displayName=v.xz.displayName;let b=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(v.VY,{ref:s,className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t})});b.displayName=v.VY.displayName;var C=r(4099),R=r(3989),_=r(9026),k=r(1569),F=r(7354),P=r(1856),Z=r(5555),A=r(5721),S=r(7787);function z(e){let{room:s}=e,[r,c]=(0,t.useState)(!1),[d,m]=(0,t.useState)("link"),[p,f]=(0,t.useState)(!1),[v,z]=(0,t.useState)(!1),[E,I]=(0,t.useState)(""),[T,V]=(0,t.useState)(""),[L,D]=(0,t.useState)("member"),[M,O]=(0,t.useState)("7d"),[U,G]=(0,t.useState)("10"),Y="".concat(window.location.origin,"/rooms/").concat(s.slug),$=async()=>{try{await navigator.clipboard.writeText(Y),f(!0),S.A.success("Room link copied to clipboard!"),setTimeout(()=>{f(!1)},2e3)}catch(e){console.error("Failed to copy link:",e),S.A.error("Failed to copy link. Please try again.")}},q=async()=>{if(!E.trim()){S.A.error("Please enter at least one email address");return}let e=E.split(/[,\n]/).map(e=>e.trim()).filter(e=>e&&e.includes("@"));if(0===e.length){S.A.error("Please enter valid email addresses");return}z(!0);try{await new Promise(e=>setTimeout(e,1500)),S.A.success("Invitations sent to ".concat(e.length," email").concat(e.length>1?"s":"")),I(""),V(""),c(!1)}catch(e){console.error("Failed to send invites:",e),S.A.error("Failed to send invitations. Please try again.")}finally{z(!1)}},B=async()=>{z(!0);try{await new Promise(e=>setTimeout(e,1e3)),S.A.success("Invite link created successfully!"),c(!1)}catch(e){console.error("Failed to create invite link:",e),S.A.error("Failed to create invite link. Please try again.")}finally{z(!1)}};return(0,a.jsxs)(i.Vq,{open:r,onOpenChange:c,children:[(0,a.jsx)(i.hg,{asChild:!0,children:(0,a.jsxs)(n.z,{size:"sm",className:"w-full",children:[(0,a.jsx)(C.Z,{className:"mr-2 h-4 w-4"}),"Invite Participant"]})}),(0,a.jsxs)(i.cZ,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(i.fK,{children:[(0,a.jsxs)(i.$N,{className:"flex items-center gap-2",children:[(0,a.jsx)(R.Z,{className:"h-5 w-5"}),'Invite to "',s.name,'"']}),(0,a.jsx)(i.Be,{children:"Add people to your room by sending email invitations or sharing a link."})]}),(0,a.jsxs)(y,{value:d,onValueChange:e=>m(e),children:[(0,a.jsxs)(N,{className:"grid w-full grid-cols-2",children:[(0,a.jsxs)(w,{value:"link",className:"flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"h-4 w-4"}),"Share Link"]}),(0,a.jsxs)(w,{value:"email",className:"flex items-center gap-2",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4"}),"Email Invite"]})]}),(0,a.jsx)(b,{value:"link",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{children:"Room Link"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,a.jsx)("div",{className:"flex-1 rounded-md border bg-muted px-3 py-2 text-sm",children:Y}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:$,children:p?(0,a.jsx)(F.Z,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(P.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Anyone with this link can join the room"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"link-expiry",children:"Expires"}),(0,a.jsxs)(u,{value:M,onValueChange:O,children:[(0,a.jsx)(h,{children:(0,a.jsx)(x,{})}),(0,a.jsxs)(j,{children:[(0,a.jsx)(g,{value:"1h",children:"1 hour"}),(0,a.jsx)(g,{value:"24h",children:"24 hours"}),(0,a.jsx)(g,{value:"7d",children:"7 days"}),(0,a.jsx)(g,{value:"30d",children:"30 days"}),(0,a.jsx)(g,{value:"never",children:"Never"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"max-uses",children:"Max uses"}),(0,a.jsxs)(u,{value:U,onValueChange:G,children:[(0,a.jsx)(h,{children:(0,a.jsx)(x,{})}),(0,a.jsxs)(j,{children:[(0,a.jsx)(g,{value:"1",children:"1 person"}),(0,a.jsx)(g,{value:"5",children:"5 people"}),(0,a.jsx)(g,{value:"10",children:"10 people"}),(0,a.jsx)(g,{value:"25",children:"25 people"}),(0,a.jsx)(g,{value:"unlimited",children:"Unlimited"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(Z.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Expires: ",{"1h":"1 hour","24h":"24 hours","7d":"7 days","30d":"30 days",never:"Never expires"}[M]||M]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["Max ","unlimited"===U?"unlimited":U," uses"]})]})]})}),(0,a.jsx)(b,{value:"email",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"email-list",children:"Email addresses"}),(0,a.jsx)(o.g,{id:"email-list",placeholder:"Enter email addresses (one per line or comma separated) john@company.com, jane@company.com",value:E,onChange:e=>I(e.target.value),rows:3}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Separate multiple emails with commas or new lines"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"participant-role",children:"Role"}),(0,a.jsxs)(u,{value:L,onValueChange:e=>D(e),children:[(0,a.jsx)(h,{children:(0,a.jsx)(x,{})}),(0,a.jsxs)(j,{children:[(0,a.jsx)(g,{value:"member",children:"Member"}),(0,a.jsx)(g,{value:"moderator",children:"Moderator"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"custom-message",children:"Custom message (optional)"}),(0,a.jsx)(o.g,{id:"custom-message",placeholder:"Add a personal message to your invitation...",value:T,onChange:e=>V(e.target.value),rows:2})]})]})})]}),(0,a.jsxs)(i.cN,{children:[(0,a.jsx)(n.z,{variant:"outline",onClick:()=>c(!1),disabled:v,children:"Cancel"}),"email"===d?(0,a.jsx)(n.z,{onClick:q,disabled:v,children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.Z,{className:"mr-2 h-4 w-4"}),"Send Invitations"]})}):(0,a.jsx)(n.z,{onClick:B,disabled:v,children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{className:"mr-2 h-4 w-4"}),"Create Link"]})})]})]})]})}},7684:function(e,s,r){"use strict";r.d(s,{default:function(){return _}});var a=r(7573),t=r(7653),n=r(1695),i=r(6273),l=r(2041),o=r(9590),c=r(2295),d=r(6802),m=r(9369);let u=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(d.fC,{ref:s,className:(0,m.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...t})});u.displayName=d.fC.displayName;let x=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(d.Ee,{ref:s,className:(0,m.cn)("aspect-square h-full w-full",r),...t})});x.displayName=d.Ee.displayName;let h=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(d.NY,{ref:s,className:(0,m.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...t})});h.displayName=d.NY.displayName;var p=r(2100),f=r(6548),j=r(5330),g=r(3727),v=r(5721),y=r(1465),N=r(4614),w=r(9511),b=r(5085),C=r(1691),R=r(7787);function _(e){var s;let{participants:r,roomOwnerId:d,currentUserId:m}=e,[_,k]=(0,t.useState)(null),[F,P]=(0,t.useState)(!1),[Z,A]=(0,t.useState)(null),[S,z]=(0,t.useState)(null),E=(0,n.useRouter)(),I=m===d,T=e=>{switch(e){case"owner":return(0,a.jsx)(p.Z,{className:"h-3 w-3"});case"moderator":return(0,a.jsx)(f.Z,{className:"h-3 w-3"});default:return(0,a.jsx)(j.Z,{className:"h-3 w-3"})}},V=e=>{switch(e){case"owner":return"default";case"moderator":return"secondary";default:return"outline"}},L=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),D=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),M=e=>{A(e),P(!0)},O=async e=>{let s="member"===e.role?"moderator":"member";z(e.id);try{let{error:r}=await C.G.updateParticipantRole(e.room_id,e.id,s);if(r){console.error("Error updating participant role:",r),R.A.error("Failed to update participant role. Please try again.");return}let a="moderator"===s?"promoted to moderator":"changed to member";R.A.success("Participant ".concat(a," successfully")),E.refresh()}catch(e){console.error("Error updating participant role:",e),R.A.error("Failed to update participant role. Please try again.")}finally{z(null)}},U=async()=>{if(Z){k(Z.id);try{let{error:e}=await C.G.removeParticipant(Z.room_id,Z.user_id||"");if(e){console.error("Error removing participant:",e),R.A.error("Failed to remove participant. Please try again.");return}R.A.success("Participant removed successfully"),P(!1),A(null),E.refresh()}catch(e){console.error("Error removing participant:",e),R.A.error("Failed to remove participant. Please try again.")}finally{k(null)}}};return 0===r.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(j.Z,{className:"mx-auto h-8 w-8 mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No participants yet"}),(0,a.jsx)("p",{className:"text-xs",children:"Invite people to join your room"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"space-y-3",children:r.map(e=>{let s=e.users,r=(null==s?void 0:s.name)||"Guest ".concat(e.id.slice(0,8)),t="owner"===e.role||e.user_id===d,n=I&&!t&&e.user_id!==m,c=I&&!t&&e.user_id!==m&&("member"===e.role||"moderator"===e.role);return(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(u,{className:"h-8 w-8",children:[(0,a.jsx)(x,{src:(null==s?void 0:s.avatar_url)||"",alt:r}),(0,a.jsx)(h,{className:"text-xs",children:D(r)})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:r}),(0,a.jsxs)(l.C,{variant:V(e.role),className:"text-xs h-5",children:[T(e.role),(0,a.jsx)("span",{className:"ml-1 capitalize",children:e.role})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Joined ",L(e.joined_at)]})]})]})]}),(n||c)&&(0,a.jsxs)(o.h_,{children:[(0,a.jsx)(o.$F,{asChild:!0,children:(0,a.jsxs)(i.z,{variant:"ghost",className:"h-8 w-8 p-0",disabled:S===e.id,children:[S===e.id?(0,a.jsx)(v.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(y.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,a.jsxs)(o.AW,{align:"end",children:[c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Xi,{onClick:()=>O(e),disabled:S===e.id,children:"member"===e.role?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),"Promote to Moderator"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),"Change to Member"]})}),(0,a.jsx)(o.VD,{})]}),n&&(0,a.jsxs)(o.Xi,{onClick:()=>M(e),className:"text-red-600 focus:text-red-600",disabled:S===e.id,children:[(0,a.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Remove from room"]})]})]})]},e.id)})}),(0,a.jsx)(c.aR,{open:F,onOpenChange:P,children:(0,a.jsxs)(c._T,{children:[(0,a.jsxs)(c.fY,{children:[(0,a.jsx)(c.f$,{children:"Remove Participant"}),(0,a.jsxs)(c.yT,{children:['Are you sure you want to remove "',(null==Z?void 0:null===(s=Z.users)||void 0===s?void 0:s.name)||"this participant",'" from the room? They will no longer have access to this room.']})]}),(0,a.jsxs)(c.xo,{children:[(0,a.jsx)(c.le,{disabled:!!_,children:"Cancel"}),(0,a.jsx)(c.OL,{onClick:U,disabled:!!_,className:"bg-red-600 hover:bg-red-700",children:_?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Removing..."]}):"Remove Participant"})]})]})})]})}},9545:function(e,s,r){"use strict";r.d(s,{default:function(){return S}});var a=r(7573),t=r(7653),n=r(1695),i=r(6273),l=r(3769),o=r(8828),c=r(3351),d=r(9369),m=r(9696);let u=c.RV,x=t.createContext({}),h=e=>{let{...s}=e;return(0,a.jsx)(x.Provider,{value:{name:s.name},children:(0,a.jsx)(c.Qr,{...s})})},p=()=>{let e=t.useContext(x),s=t.useContext(f),{getFieldState:r,formState:a}=(0,c.Gc)(),n=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=s;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},f=t.createContext({}),j=t.forwardRef((e,s)=>{let{className:r,...n}=e,i=t.useId();return(0,a.jsx)(f.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:s,className:(0,d.cn)("space-y-2",r),...n})})});j.displayName="FormItem";let g=t.forwardRef((e,s)=>{let{className:r,...t}=e,{error:n,formItemId:i}=p();return(0,a.jsx)(m._,{ref:s,className:(0,d.cn)(n&&"text-destructive",r),htmlFor:i,...t})});g.displayName="FormLabel";let v=t.forwardRef((e,s)=>{let{...r}=e,{error:t,formItemId:n,formDescriptionId:i,formMessageId:l}=p();return(0,a.jsx)(o.g7,{ref:s,id:n,"aria-describedby":t?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!t,...r})});v.displayName="FormControl";let y=t.forwardRef((e,s)=>{let{className:r,...t}=e,{formDescriptionId:n}=p();return(0,a.jsx)("p",{ref:s,id:n,className:(0,d.cn)("text-[0.8rem] text-muted-foreground",r),...t})});y.displayName="FormDescription";let N=t.forwardRef((e,s)=>{var r;let{className:t,children:n,...i}=e,{error:l,formMessageId:o}=p(),c=l?String(null!==(r=null==l?void 0:l.message)&&void 0!==r?r:""):n;return c?(0,a.jsx)("p",{ref:s,id:o,className:(0,d.cn)("text-[0.8rem] font-medium text-destructive",t),...i,children:c}):null});N.displayName="FormMessage";var w=r(8648);let b=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(w.fC,{className:(0,d.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...t,ref:s,children:(0,a.jsx)(w.bU,{className:(0,d.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});b.displayName=w.fC.displayName;var C=r(6225),R=r(5721),_=r(6991),k=r(8113),F=r(8448),P=r(1691),Z=r(7787);let A=F.Ry({name:F.Z_().min(3,"Room name must be at least 3 characters").max(100,"Room name must be less than 100 characters"),description:F.Z_().max(500,"Description must be less than 500 characters").optional(),is_public:F.O7(),max_participants:F.Rx().min(2,"Must allow at least 2 participants").max(100,"Maximum 100 participants allowed"),is_persistent:F.O7()});function S(e){let{room:s}=e,[r,o]=(0,t.useState)(!1),d=(0,n.useRouter)(),m=(0,c.cI)({resolver:(0,k.F)(A),defaultValues:{name:s.name,description:s.description||"",is_public:s.is_public,max_participants:s.max_participants,is_persistent:s.is_persistent}}),x=async e=>{o(!0);try{let{error:r}=await P.G.updateRoom(s.id,{name:e.name,description:e.description||void 0,is_public:e.is_public,max_participants:e.max_participants,is_persistent:e.is_persistent});if(r){console.error("Error updating room:",r),Z.A.error("Failed to update room settings. Please try again.");return}Z.A.success("Room settings updated successfully!"),d.refresh()}catch(e){console.error("Error updating room:",e),Z.A.error("Failed to update room settings. Please try again.")}finally{o(!1)}};return(0,a.jsx)(u,{...m,children:(0,a.jsxs)("form",{onSubmit:m.handleSubmit(x),className:"space-y-6",children:[(0,a.jsx)(h,{control:m.control,name:"name",render:e=>{let{field:s}=e;return(0,a.jsxs)(j,{children:[(0,a.jsx)(g,{children:"Room Name"}),(0,a.jsx)(v,{children:(0,a.jsx)(l.I,{...s,placeholder:"Enter room name"})}),(0,a.jsx)(y,{children:"The display name for your room"}),(0,a.jsx)(N,{})]})}}),(0,a.jsx)(h,{control:m.control,name:"description",render:e=>{let{field:s}=e;return(0,a.jsxs)(j,{children:[(0,a.jsx)(g,{children:"Description"}),(0,a.jsx)(v,{children:(0,a.jsx)(C.g,{...s,placeholder:"Brief description of the room's purpose",rows:3})}),(0,a.jsx)(y,{children:"Optional description visible to participants"}),(0,a.jsx)(N,{})]})}}),(0,a.jsx)(h,{control:m.control,name:"max_participants",render:e=>{let{field:s}=e;return(0,a.jsxs)(j,{children:[(0,a.jsx)(g,{children:"Maximum Participants"}),(0,a.jsx)(v,{children:(0,a.jsx)(l.I,{...s,type:"number",min:"2",max:"100",onChange:e=>s.onChange(parseInt(e.target.value)||2)})}),(0,a.jsx)(y,{children:"Maximum number of people who can join this room"}),(0,a.jsx)(N,{})]})}}),(0,a.jsx)(h,{control:m.control,name:"is_public",render:e=>{let{field:s}=e;return(0,a.jsxs)(j,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(g,{className:"text-base",children:"Public Room"}),(0,a.jsx)(y,{children:"Allow anyone with the link to join this room"})]}),(0,a.jsx)(v,{children:(0,a.jsx)(b,{checked:s.value,onCheckedChange:s.onChange})})]})}}),(0,a.jsx)(h,{control:m.control,name:"is_persistent",render:e=>{let{field:s}=e;return(0,a.jsxs)(j,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(g,{className:"text-base",children:"Persistent Room"}),(0,a.jsx)(y,{children:"Keep this room available even when no one is present"})]}),(0,a.jsx)(v,{children:(0,a.jsx)(b,{checked:s.value,onCheckedChange:s.onChange})})]})}}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(i.z,{type:"submit",disabled:r,children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})})]})})}},6225:function(e,s,r){"use strict";r.d(s,{g:function(){return i}});var a=r(7573),t=r(7653),n=r(9369);let i=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...t})});i.displayName="Textarea"}},function(e){e.O(0,[458,773,787,540,124,672,293,528,744],function(){return e(e.s=5275)}),_N_E=e.O()}]);